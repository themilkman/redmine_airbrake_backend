h1. <%= @notice.error[:message] %>

<% if @notice.error.present? && @notice.error[:backtrace].present? %>
h2. Stacktrace:

p((. <%=raw @notice.error[:backtrace].collect { |e| format_backtrace_element(e) }.join("\n") %>
<% end %>

<% if @notice.request.present? %>
h2. Request:

<%=format_list_item('URL', @notice.request[:url]) %>
<%=format_list_item('Component', @notice.request[:component]) %>
<%=format_list_item('Action', @notice.request[:action]) %>

<% if @notice.request[:params].present? %>
h2. Parameters:

<%=format_table(@notice.request[:params]) %>
<% end %>

<% if @notice.request[:cgi_data].present? %>
h2. Headers:

<%=format_table(@notice.request[:cgi_data]) %>
<% end %>

<% log = @notice.request[:session].delete(:log) if @notice.request[:session].present? %>
<% if @notice.request[:session].present? %>
h2. Session:

<%=format_table(@notice.request[:session]) %>
<% end %>

<% if log.present? %>
h2. Log:

<pre>
<%=format_log(log) %>
</pre>
<% end %>
<% end %>

<% if @notice.env.present? %>
h2. Environment

<%=format_list_item('Name', @notice.env[:environment_name]) %>
<%=format_list_item('Directory', @notice.env[:project_root]) %>
<%=format_list_item('Hostname', @notice.env[:hostname]) %>
<% end %>
